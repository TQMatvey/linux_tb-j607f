# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/media/i2c/ovti,ov5670.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Omnivision OV5670 5 Megapixels raw image sensor

maintainers:
  - Jacopo Mondi <jacopo@jmondi.org>

description: |-
  The OV5670 is a 5 Megapixels raw image sensor which provides images in 10-bits
  RAW BGGR Bayer format on a 2 data lanes MIPI CSI-2 serial interface and is
  controlled through an I2C compatible control bus.

properties:
  compatible:
    const: ovti,ov5670

  reg:
    maxItems: 1

  clocks:
    description: System clock. From 6 to 27 MHz.
    maxItems: 1

  powerdown-gpios:
    description: Reference to the GPIO connected to the PWDNB pin. Active low.
    maxItems: 1

  reset-gpios:
    description:
      Reference to the GPIO connected to the XSHUTDOWN pin. Active low.
    maxItems: 1

  avdd-supply:
    description: Analog circuit power. Typically 2.8V.

  dvdd-supply:
    description: Digital circuit power. Typically 1.2V.

  dovdd-supply:
    description: Digital I/O circuit power. Typically 2.8V or 1.8V.

  port:
    $ref: /schemas/graph.yaml#/$defs/port-base
    additionalProperties: false

    properties:
      endpoint:
        $ref: /schemas/media/video-interfaces.yaml#
        unevaluatedProperties: false

        properties:
          data-lanes:
            description: The sensor supports 1 or 2 data lanes operations.
            minItems: 1
            maxItems: 2
            items:
              enum: [1, 2]

          clock-noncontinuous: true

required:
  - compatible
  - reg
  - clocks
  - port

additionalProperties: false

examples:
  - |
    i2c0 {
        #address-cells = <1>;
        #size-cells = <0>;

        ov5670: sensor@36 {
            compatible = "ovti,ov5670";
            reg = <0x36>;

            clocks = <&sensor_xclk>;
            assigned-clocks = <&sensor_xclk>, <&pll2>;
            assigned-clock-parents = <&pll2>;
            assigned-clock-rates = <19200000>;

            port {
                endpoint {
                    remote-endpoint = <&csi_ep>;
                    data-lanes = <1 2>;
                    clock-noncontinuous;
                };
            };
        };
    };

...

